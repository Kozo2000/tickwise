# Tickwise Strategy Guide  
（戦略設計・レシピ・検証ガイド）

---

## 1. このドキュメントの目的

このドキュメントは、Tickwise を **どのような考え方で使うべきか** を説明します。

- tickwise.env とコマンドオプションの役割
- 戦略（レシピ）の設計方法
- 分析結果の検証・再利用の方法

> ここでは「何が指定できるか」ではなく  
> **「なぜそう指定するのか」**を扱います。  
> 各オプションの完全な仕様は command-reference.md を参照してください。

---

## 2. Tickwise における「戦略」とは何か

### 2.1 戦略 ≠ 単一指標

Tickwise における戦略とは、

- テクニカル指標
- 閾値
- weight（重み）
- 投資スタンス
- ニュースの扱い方

を **一貫した意図で束ねたもの**です。
複数の要素をどう評価し、どう判断に使うかが戦略です。

---

### 2.2 戦略は「固定ロジック」ではなく「レシピ」

Tickwise は正解の戦略を内蔵しません。

代わりに、

- 指標
- 閾値
- 重み
- スタンス

を組み合わせ、  
**自分の相場観を表現するための道具**を提供します。

---

## 3. 初期値と設定の優先順位

Tickwise では、同じ設定項目に対して  
複数の指定方法が存在します。

評価される優先順位は以下の通りです。

コマンドオプション

↓

tickwise.env

↓

デフォルト値（コード内）

---

### 3.1 コマンドオプション

- 実行時に最優先で評価される
- 一時的な調整・検証向け
- 毎回変わる条件に適している

例：

--buy-rsi 20
--stance buyer
--no-news

---

### 3.2 tickwise.env

- コマンドオプションが指定されていない場合に使用される
- 戦略の「基本思想」を固定する用途
- 繰り返し使う前提の設定

---

### 3.3 デフォルト値

- コマンドオプションも tickwise.env も指定されていない場合に使用
- 動作保証のための最低限の値
- 戦略としての意味は薄い

> デフォルト値は「おすすめ設定」ではありません。  
> 未指定時の安全弁です。

---

## 4. レシピにおける前提（重要）

以下のレシピ例では、  
**tickwise.env は最小構成（ベースライン）**になっていることを前提とします。

- 指標は原則 OFF
- ニュースは OFF
- LLM は OFF
- weight はデフォルト

tickwise.env は  
**戦略を上書きしない安全な下地**として使い、  
戦略の指定はコマンドオプションで明示します。

---

### ベースライン例（考え方）

- 「何もしない」env
- コマンドオプションで意図をすべて読める状態

---

## 5. 戦略レシピ集（実行可能例）

---

### 5.1 逆張り（Reversal）

#### 想定する相場
- 一定期間の下落後
- 売られ過ぎ
- 材料はあるが価格に織り込まれていない局面

#### 使用するコマンドオプション

tickwise -t 9984.T \
  --stance buyer \
  --buy-rsi 20 \
  --macd-minus-ok \
  --macd-diff-low 1 \
  --bb-bandwidth-squeeze-pct 10

#### 意図
RSI による強い売られ過ぎ評価
MACD マイナス圏でも反発兆候を許容
ボリンジャーバンド収縮で反転余地を確認



##### ニュースを確認する場合

 tickwise -t 9984.T \
  --stance buyer \
  --buy-rsi 20 \
  --macd-minus-ok \
  --macd-diff-low 1 \
  --bb-bandwidth-squeeze-pct 10 \
  --show-news


---


### 5.2 順張り（Trend Follow）
#### 想定する相場
- 明確な上昇トレンド
- 押し目が機能している局面

#### 使用するコマンドオプション

tickwise -t 7203.T \
  --stance buyer \
  --buy-rsi 40


#### 意図
- トレンドは基本分析（EMA/SMA/ADX）で確認
- RSI は押し目確認として使用
- ニュースはノイズになりやすいため必要に応じて無効化

---

### 5.3 ニュース主導型
#### 想定する相場
- 決算
- M&A
- 政策・規制
- 業界構造変化


#### 使用するコマンドオプション
tickwise -t AAPL \
  --stance buyer \
  --show-news \
  --news-filter \
  --news-count 15

---

### 5.4 ボリンジャー・スクイーズ（Volatility Break）
####想定する相場
- 値動きが極端に小さくなっている
- ボラティリティ低下が続いている
- 次の大きな値動きを待つ局面

#### 使用するコマンドオプション
tickwise -t 9984.T \
  --stance holder \
  --bb-bandwidth-squeeze-pct 8


#### 意図
- バンド幅が一定以下 → 「溜め」
- 方向は決め打ちしない（holder）
- 仕掛け前の監視用途

#### 向いている使い方
- エントリー前の候補抽出
- 他レシピと組み合わせる前段階

---

### 5.5 サポート・レジスタンス重視（Fibonacci）
#### 想定する相場
- 確な高値・安値が存在
- レンジ、または反発局面

#### 使用するコマンドオプション

tickwise -t 7203.T \
  --stance buyer

（※ フィボナッチは基本分析として常に評価される）

#### 意図
- 50% / 61.8% 付近での反応を見る
- 反発か、割り込みかを数値で確認
- RSI や MACD と 併用して判断

#### 注意点
- フィボナッチ単独では決めない
- 必ず他指標と組み合わせる

---

### 5.6 EMA / SMA クロス確認型
#### 想定する相場
- トレンド転換初動
- ダマシが多い局面

#### 使用するコマンドオプション
tickwise -t 9433.T \
  --stance buyer

#### 意図
- 短期／長期移動平均の関係性を見る
- クロスそのものではなく 位置関係を重視
- トレンド初動の「可能性」を評価

#### 向いている使い方
- 順張りレシピの補助
- エントリー前の確認

---

### 5.7 モメンタム過熱チェック（ADX / ROC）
#### 想定する相場
- 急騰・急落後
- SNS やニュースで騒がれている銘柄

#### 使用するコマンドオプション
tickwise -t AAPL \
  --stance holder

#### 意図
- ADX：トレンドの“強さ”を見る
- ROC：加速しすぎていないかを見る
- 追いかけていい相場かどうかを判断

---

### 5.8 ニュース＋テクニカル整合型（総合判断）
#### 想定する相場
- 材料あり
- ただし価格反応が曖昧

#### 使用するコマンドオプション
tickwise -t 9984.T \
  --stance buyer \
  --show-news \
  --news-filter

#### 意図
- ニュースを主、テクニカルを従にしない
- 数値が材料を肯定しているかを確認
- LLM は「整理役」に限定

---

### 5.9 監視専用（Watchlist / スクリーニング）
#### 想定する用途
- 売買しない
- 毎日流す
- 気配だけ掴む

#### 使用するコマンドオプション
tickwise -t 7203.T \
  --no-llm \
  --no-news \
  --save-technical-log

#### 意図
- 判断しない
- 変化だけ拾う
- ログを資産として残す

---

### 5.10 複合レシピの考え方（上級）
- Tickwise のレシピは 排他的ではありません。


例：
- スクイーズ（5.4）↓
- 逆張り（5.1）↓
- ニュース確認（5.8）

という 段階的利用が可能。

#### 重要な考え方
- 1回の実行で完結させない
- レシピは「判断工程」
- Tickwise は 工程を可視化する道具

---

# 6. weight 設計の考え方

### 6.1 weight は「信頼度」
weight は強さではなく、
その戦略でどの指標をどれだけ信じるかを表します。

### 6.2 よくある失敗
すべて同じ weight

すべて高い weight

結果として、

何も主張しない戦略になります。

---

# 7. 戦略を壊さないための注意点
tickwise.env を頻繁に変更しない

コマンドオプションを盛りすぎない

便利そうな指標を全部有効にしない

LLM の出力を最終判断にしない

Tickwise は
判断を代行するツールではありません。

--- 

# 8. 戦略を検証・拡張するための機能
### 8.1 --debug-prompt：プロンプト確認

tickwise -t 7203.T \
  --debug-prompt
LLM に渡すプロンプト全文を出力

API は呼ばれない
他の LLM に手動投入する用途に使える

### 8.2 LLM を使わない運用
tickwise -t 7203.T \
  --no-llm
テクニカル分析のみ実行

LLMの見解が不要。検証・バッチ用途など。

### 8.3 ログ出力（CSV / JSON）
CSV：表計算・比較向け
JSON：プログラム連携向け

8.3.1 JSONログの活用例（パイプ連携）
JSON を標準出力に流すには --stdout-log が必要です。

必要な項目だけ抽出する
tickwise -t 9984.T \
  --no-llm \
  --save-technical-log \
  --stdout-log \
  --log-format json \
  --silent \
| jq .

しきい値判定（例：RSI が 30 以下だけ表示）
tickwise -t 9984.T \
  --no-llm \
  --save-technical-log \
  --stdout-log \
  --log-format json \
  --silent \
| jq 'select(.rsi <= 30)'

複数銘柄を回して JSON Lines として蓄積する
for t in 7203.T 9984.T 9433.T; do
  tickwise -t "$t" \
    --no-llm \
    --save-technical-log \
    --stdout-log \
    --log-format json \
    --silent
done >> tickwise-log.jsonl

---


# 9. まとめ
- 戦略は tickwise.env に隠さない
- 戦略はコマンドオプションで読める形にする
- env は思想、オプションは意図
- ログを残し、戦略を検証する

## Tickwise は
## 判断を出すツールではなく、
## 判断を説明できる状態を作るツールです。