## 基本解析（RSI / MACD）

Tickwise における「基本解析」は、
RSI と MACD という2つの代表的なテクニカル指標を組み合わせて、
“買い／売り／様子見”の方向性を定量化することを目的としている。

ここではまず指標そのものの意味を簡潔に説明し、
次に Tickwise がそれらを どのように評価・スコア化しているかを解説する。

### RSI（Relative Strength Index）とは

RSI（相対力指数）は、一定期間における値上がり幅と値下がり幅の比率から、
現在の価格が「買われ過ぎ」か「売られ過ぎ」かを示す指標である。

一般的な解釈は以下の通り。

- RSI が高い
→ 短期的に買われ過ぎている可能性

- RSI が低い
→ 短期的に売られ過ぎている可能性

- RSI が中間付近
→ 過熱も売られ過ぎもない中立状態

Tickwise では、RSI を
**価格が極端な状態にあるかどうかを判断する“温度計”**として扱う。

### MACD（Moving Average Convergence Divergence）とは

MACD は、短期と長期の移動平均の差から算出される指標で、
価格のトレンド方向や勢いの変化を見るために使われる。

一般的な見方は以下の通り。

- MACD が Signal を上回る
→ 上昇方向の力が優勢

- MACD が Signal を下回る
→ 下落方向の力が優勢

- MACD と Signal の差が大きい
→ 勢いが強い（ただし過熱の可能性もある）

Tickwise では MACD を、
「今どちら向きに動こうとしているか」を示す方向指標として扱う。

### Tickwise における基本解析の考え方

Tickwise の基本解析は、
RSI と MACD を単独で判断材料にするのではなく、組み合わせて評価する。

考え方はシンプルで、

- RSI は「位置（高すぎる／低すぎる）」を見る

- MACD は「向き（上か下か）」を見る

という役割分担になっている。

### スコアリングの前提条件

Tickwise では、以下を前提としてスコアを組み立てる。

- RSI が低い
→ 「反発余地があるかもしれない」

- RSI が高い
→ 「過熱しているかもしれない」

- MACD が Signal を上回る
→ 「上向きに動いている」

- MACD が Signal を下回る
→ 「下向きに動いている」

これらの 組み合わせ によって、
買い・売り・中立の方向性を段階的に評価する。

### Tickwise における RSI の扱い

- Tickwise では RSI を次のように分類する。

- RSI ≤ buy-rsi
→ 「割安ゾーン」

- RSI ≥ sell-rsi
→ 「過熱ゾーン」

- その間
→ 「中立ゾーン」

ここで重要なのは、
RSI 単体では売買を決めないという点である。

RSI はあくまで
「今、極端な位置にいるかどうか」を示す補助情報として使われる。

### Tickwise における MACD の扱い

MACD は、以下の2点を同時に評価する。

MACD が Signal を上回っているか／下回っているか

MACD と Signal の差（乖離）がどの程度あるか

Tickwise では、乖離が小さい場合と大きい場合を分けて扱い、

- 差が小さい
→ 動き始め、または勢いが弱い

- 差が大きい
→ 勢いが強いが、過熱の可能性もある

と解釈する。

### RSI × MACD によるスコアリングの考え方

Tickwise の基本スコアは、
RSI と MACD の状態を組み合わせて決まる。

代表的な例は以下の通り。

- RSI が割安 + MACD が上向き
→ 強い買いシグナル

- RSI が割安 + MACD が下向き
→ 反発期待はあるが慎重（弱い買い）

- RSI が過熱 + MACD が上向き
→ 過熱警戒（売り方向）

- RSI が中立 + MACD が上向き
→ トレンド継続の可能性を評価

- RSI が中立 + MACD が下向き
→ 弱含み、または様子見

このように、
「位置（RSI）」と「向き（MACD）」の組み合わせで判断を分解している。

### MACD マイナス圏の扱い（macd-minus-ok）

Tickwise では、MACD がマイナス圏にある場合の扱いを
オプションで制御できる。

- macd-minus-ok が無効
→ MACD がマイナス圏のとき、買い方向の評価を抑制

- macd-minus-ok が有効
→ マイナス圏でも反発狙いとして評価を許容

これにより、

- トレンド重視

- 逆張り重視

といった スタイルの違いを明示的に切り替えられる。

### まとめ
- RSI と MACD の状態を 一貫したルールで整理

- 判断の前提を 数値と条件として明示

- 他の指標やレシピと 組み合わせ可能な形で提供


## EMA（指数平滑移動平均）

Tickwise における EMA（Exponential Moving Average）は、
価格のトレンド方向と強さを定量的に把握するための指標として使われる。

RSI や MACD が「過熱度」や「勢い」を見るのに対し、
EMA は トレンドが上向きか下向きか、または存在しないかを判断する役割を担う。

### EMA（指数平滑移動平均）とは

EMA は移動平均の一種で、
直近の価格により大きな重みを与える点が特徴である。

- 直近の値動きに敏感に反応する

- トレンド転換を比較的早く捉えやすい

- ノイズは残るが、遅行性は小さい

この性質から EMA は、
**「今の流れが続いているか／変わりつつあるか」**を把握するために広く使われる。

### Tickwise における EMA の計算方法

Tickwise では、EMA の計算に
Rust のテクニカル分析ライブラリ ta クレートを使用している。

このライブラリは、
TA（Technical Analysis）の標準的なトレイト設計に基づいており、
各指標は「逐次データを入力して結果を得る」形で計算される。

Tickwise ではこの仕組みをそのまま利用し、

- 終値データを時系列で投入

- EMA を 1回の処理で確定値まで更新

- 再計算や二重計算を行わない

という形で、安全かつ一貫した計算を行っている。

### 短期 EMA と長期 EMA

Tickwise では、以下の 2 本の EMA を用いる。

- 短期 EMA（5日）
→ 直近の価格変動に敏感

- 長期 EMA（20日）
→ 全体のトレンドを反映

この 2 本を比較することで、短期が長期を上回っているか下回っているか
ほぼ同じ水準かを評価する。

### Tickwise における EMA の考え方

Tickwise では、
**EMA の絶対値そのものよりも、短期と長期の「差」**を重視する。

#### 短期 EMA − 長期 EMA
→ 現在のトレンドの方向と強さを示す値

この差が、

- 正で大きい
→ 上昇トレンドが明確

- 負で大きい
→ 下降トレンドが明確

- ほぼゼロ
→ トレンドがない（レンジ）

と解釈される。

### EMA スコアリングの設計

Tickwise では、
短期 EMA と長期 EMA の差を 5段階スコアに変換する。

|状態	|解釈	|スコア|
|---	|---	|---|
|短期が大幅に上	|強い上昇トレンド	|+2|
|短期がやや上	|上昇トレンド	|+1|
|ほぼ同値	|トレンドなし	|0|
|短期がやや下	|下降トレンド	|-1|
|短期が大幅に下	|強い下降トレンド	|-2|

ここで重要なのは、
EMA 単体で売買判断を完結させないという点である。

EMA はあくまで
「今、価格がどちら向きに流れているか」を示す材料であり、
RSI・MACD・他の指標と組み合わせて使われる。

### Tickwise における EMA の位置づけ

EMA は Tickwise の中で、

- 「逆張り」を直接判断する指標ではない

- 「勢い」を測る指標でもない

トレンドの有無と向きを示す基準軸として扱われる。

- そのため、逆張りレシピでは
→ EMA スコアを低く（または重みを下げる）

- トレンドフォロー・ブレイク狙いでは
→ EMA スコアを重視する

といった 使い分けが前提となっている。

### Tickwise が EMA を採用する理由

Tickwise が EMA を基本指標として採用している理由は、広く使われている標準的な指標である計算ロジックが明確で再現性が高いTA ライブラリにより安全に計算できる

EMA は「判断を出す指標」ではなく、判断の前提となる“流れ”を示す指標である。

### まとめ：EMA が示すもの

Tickwise における EMA は、

- 上か下か

- 強いか弱いか

- そもそも流れがあるか

を 数値とスコアで整理するための道具である。



## SMA（単純移動平均）

Tickwise における SMA（Simple Moving Average）は、
価格の平均的な水準と、トレンドの安定性を確認するための指標として扱われる。

EMA が「直近の変化に敏感なトレンド指標」なのに対し、
SMA は ノイズをならし、より“素直な流れ”を確認するための基準線として位置づけられている。

### SMA（単純移動平均）とは

SMA は、一定期間の終値を単純平均したものである。

- すべての価格に同じ重みを与える

- 計算方法が直感的で分かりやすい

- 短期的なブレに引きずられにくい

そのため SMA は、

- トレンドの方向を大づかみに確認したいとき

- 価格が「平均的に見て高いか低いか」を把握したいとき

に使われることが多い。

### Tickwise における SMA の計算方法

Tickwise では、SMA の計算にも
EMA と同様に ta クレートを使用している。

このライブラリは、
TA（Technical Analysis）の標準トレイトに基づいた逐次計算モデルを採用しており、

終値データを時系列で投入

最新時点の SMA を 1 回の処理で確定

不要な再計算や二重処理を行わない

という形で、安定した計算を行っている。

### 短期 SMA と長期 SMA

Tickwise では、以下の 2 本の SMA を使用する。

- 短期 SMA（5日）
→ 直近の平均的な価格水準

- 長期 SMA（20日）
→ 中期的な平均価格水準

この 2 本の関係を見ることで、

- 価格が平均的に上向いているか

- 下向いているか

- 方向感がないか

を判断する。

### Tickwise における SMA の考え方

Tickwise では、
SMA の絶対値そのものではなく、短期 SMA と長期 SMA の差を評価対象とする。

#### 短期 SMA − 長期 SMA
→ 平均価格のズレ＝トレンドの傾き

この差が、

- 正で大きい
→ 上昇方向に安定した流れ

- 負で大きい
→ 下降方向に安定した流れ

- ほぼゼロ
→ 平均価格が収束＝方向感なし

と解釈される。

### SMA スコアリングの設計

Tickwise では、
短期 SMA と長期 SMA の差を 5段階スコアに変換する。

|状態	|解釈	|スコア|
|---	|---	|---|
|短期が大幅に上	|強いゴールデンクロス	|+2|
|短期がやや上	|緩やかな上昇	|+1|
|ほぼ同値	|トレンドなし	|0|
|短期がやや下	|緩やかな下降	|-1|
短期が大幅に下	|強いデッドクロス	|-2|

このスコアは、

- トレンドが「あるか・ないか」

- その流れが「どの程度安定しているか」

を示すためのものであり、
売買のタイミングを直接示すものではない。

### EMA と SMA の役割の違い

Tickwise では EMA と SMA を 意図的に併用している。

- EMA
→ 直近の動きに敏感（変化の兆しを捉えやすい）

- SMA
→ 平均的な流れを反映（ノイズに強い）

そのため、

- EMA と SMA が同じ方向
→ トレンドが比較的素直

- EMA と SMA が食い違う
→ 転換期、または不安定な相場

といった 状態の違いを把握できる。

### Tickwise における SMA の位置づけ

SMA は Tickwise の中で、

- 逆張りの直接的な判断材料ではない

- ブレイクの初動を捉える指標でもない

- トレンドの「安定度」を測る補助軸

として使われる。

そのため、

- トレンドフォローでは
→ EMA と合わせて重視される

- 逆張りでは
→ 重みを下げる、または参考情報として扱う

といった 使い分けが前提となる。

### まとめ：SMA が示すもの

Tickwise における SMA は、

- 価格が平均的にどちらへ傾いているか

- その流れが安定しているかどうか

を シンプルな形で示す指標である。

EMA が「変化の速さ」を示すなら、SMA は「流れの落ち着き」を示す。

Tickwise は、この 2 つを並べて提示することで、
ユーザ自身が「今は追う相場か、待つ相場か」を判断できる余地を残している。

## ADX（Average Directional Index）

Tickwise における ADX（平均方向性指数）は、
トレンドの“方向”ではなく、“強さ”を測るための指標として扱われる。

EMA / SMA が「上向きか下向きか」を示すのに対し、
ADX は **“そもそもトレンド相場なのか、レンジ相場なのか”**を判断する材料になる。

### ADX（平均方向性指数）とは

ADX は、Directional Movement（+DM / -DM）と True Range（TR）を用いて計算される指標で、
相場にトレンドが存在するか、どの程度強いかを数値化する。

一般的な理解としては以下のような位置づけになる。

- ADX が高い
→ トレンドが強い（上昇・下落のどちらかに“走りやすい”）

- ADX が低い
→ トレンドが弱い（レンジになりやすい／ブレやすい）

ここで重要なのは、ADX は 上昇か下落かを示さない点である。
ADX はあくまで 強さのメーターであり、方向は別の指標（移動平均やDI等）で補う。

### Tickwise における ADX の計算方法

Tickwise では ADX を 自前で演算している。
理由は、使用している ta クレートに ADX が標準実装として用意されていないためである。

Tickwise の ADX は、以下の要素を使って直近14期間を評価する。

- True Range（TR）
→ 価格変動の実質的な振れ幅

- +DM / -DM
→ 上方向／下方向の“優勢さ”

- +DI / -DI
→ TRで正規化した方向性の強さ

- DX
→ +DI と -DI の差分から算出される方向性の強さ

実装上は、

- 直近14期間の TR から ATR を算出（単純平均）

- 直近14期間の +DM / -DM を集計

- +DI / -DI → DX を計算

ADX は「直近DXをそのまま採用」する単純版という流れになっている。

※一般的なADXはDXを平滑化していく（Wilderの平滑化など）が、
Tickwise では **“直近の状態を素直に反映する”**ため、まず単純版を採用している。

### Tickwise における ADX の位置づけ

Tickwise での ADX は、
「その戦略が今の相場に合っているか」を見極めるためのゲート役として機能する。

例として、

- ブレイク狙い／順張り
→ ADX が高い（トレンドがある）ほど相性が良い

- 逆張り／レンジ回帰
→ ADX が低い（トレンドがない）ほど相性が良い

のように、レシピ（戦略）によって評価の意味が変わる指標である。

### ADX スコアリングの設計

Tickwise では、ADX を 5段階にスコア化する。
基準の考え方は「20付近が分岐点」とする一般的な扱いに沿っている。

|ADX の水準	|解釈	|スコア|
|---	|---	|---|
|50以上	|非常に強いトレンド	|+2|
|30以上	|強いトレンド	|+1|
|20以上	|トレンド成立（ただし強くない）	|0|
|10以上	|トレンド弱い（レンジ寄り）	|-1|
|10未満	|トレンド不在（レンジ色が濃い）	|-2|

このスコアは「売買方向」を決めるものではなく、
その相場が“走りやすい状態かどうか”を数値化することを目的としている。

### まとめ：ADX が示すもの

Tickwise における ADX は、

今の相場にトレンドがあるか

そのトレンドがどれくらい強いか

を 数値とスコアで整理する指標である。

「勢い（ROCなど）」と「トレンドの強さ（ADX）」は別物であり、
Tickwise では別々のノブとして扱われる。

ADX は、レシピに応じて

- “追うべき相場か”

- “待つべき相場か”

を判断するための、重要な前提情報となる。


## ROC（Rate of Change / 変化率）

Tickwise における ROC（変化率）は、
一定期間で価格がどれだけ変化したか（上がったか／下がったか）をパーセントで示す指標として扱われる。

EMA / SMA が「平均線の位置関係」からトレンドを見たり、
ADX が「トレンドの強さ」を見たりするのに対し、
ROC は “どれくらい動いたか”という勢い（モメンタム）を直球で測る役割を担う。

### ROC（変化率）とは

ROC は、ある時点の価格と一定期間前の価格を比較し、
その差分をパーセントで表したもの。

- ROC がプラス
→ 期間内で上昇している

- ROC がマイナス
→ 期間内で下落している

- ROC が 0 付近
→ 期間内で大きな変化がない

指標としてはシンプルだが、
“どれだけ動いたか”が明確に数値として出るため、ブレイク狙いや順張り系の判断材料として使われやすい。

Tickwise における ROC の計算方法

Tickwise の ROC は、直近の終値と 一定日前の終値を使って計算する。

#### roc = ((最新終値 - N日前終値) / N日前終値) * 100

実装では N = 10 を想定し、

最新の終値（latest_close）

10営業日前相当の終値（data[len - 11]）

を比較して ROC を算出している。

このため、ROC の計算には最低 11 日分以上のデータが必要となる。

### Tickwise における ROC の位置づけ

Tickwise での ROC は、
「今の値動きに勢いがあるか」を確認するための材料として使われる。

ただし、ROC は “方向”を含む勢いであり、

- ROC が強い
→ よく動いている（上にも下にも）

- ROC が弱い
→ 動いていない（レンジ寄り）

という意味になる。

そのため Tickwise では、ROC を単独で解釈せず、
ADX（トレンドの強さ）などと組み合わせて使うことを前提としている。

### ROC スコアリングの設計

Tickwise では、ROC を 5段階にスコア化する。
狙いは「勢いがあるか／ないか」を分かりやすく分類すること。

|ROC の水準	|解釈	|スコア|
|---	|---	|---|
|+10%超	|非常に強い上昇	|+2|
|+3%超	|緩やかな上昇	|+1|
|-3%〜+3%	|同値圏（変化が小さい）	|0|
|-10%未満	|非常に強い下落	|-2|
|それ以外	|緩やかな下落	|-1|

ここでのスコアは、
「買い／売り」を決め打ちするものではなく、
値動きの勢い（変化率）の大きさを要約するためのもの。

### まとめ：ROC が示すもの

Tickwise における ROC は、

一定期間でどれだけ上がったか／下がったか

値動きに勢いがあるかどうか

をシンプルに数値化する指標である。

ROC は勢いを示す一方で、
“その勢いがトレンドとして続くか”は別問題である。

Tickwise では、

- ROC（勢い）

- ADX（トレンドの強さ）

を別々のノブとして扱い、
レシピ（戦略）に応じて重み付けを変えられる設計になっている。

## ストキャスティクス（Stochastics）

Tickwise におけるストキャスティクスは、
一定期間の価格レンジ（高値〜安値）の中で、終値がどの位置にいるかを数値化し、
短期的な「行き過ぎ（過熱／売られ過ぎ）」を把握するための指標として扱う。

RSI が“上げ下げの強弱比”から過熱感を見るのに対し、
ストキャスは **「レンジ内の位置」**を使って過熱感を見るタイプのオシレーターである。

### ストキャスティクスとは

ストキャスティクスは一般に、次の2本で語られる。

- %K：終値の位置（メイン指標）

- %D：%K の平滑化（シグナル）

- %K の基本式は以下。

### %K = (Close - LowestLow) / (HighestHigh - LowestLow) × 100

ここで、

- HighestHigh：期間内の最高値

- LowestLow：期間内の最安値

- Close：当日の終値

であり、%K は 0〜100 の範囲を取る。

一般的には、

- 高い（例：80以上）→ 高値圏（買われ過ぎと見なされやすい）

- 低い（例：20以下）→ 安値圏（売られ過ぎと見なされやすい）

という“温度計”的な使い方をする。

### Tickwise における計算方法

Tickwise のストキャスは、**%K（14期間）と %D（3期間平均）**を計算する。

1) 必要データ量

最低14日以上のデータが必要
（14期間の高値・安値レンジを作るため）

2) 14期間の HighestHigh / LowestLow を作る

Tickwise は日次データ全体に対して、

各日の「直近14日（足りない部分は先頭から）」を取り

その範囲の最高値（high）と最安値（low）を計算して保持

する。

3) 最新日の %K を計算

最新日の high / low / close を用いて %K を計算する。

#### high == low（レンジ幅0）になった場合は
ゼロ割り回避のため %K を 0.0 として扱う。

4) %D を計算（直近3本の %K の平均）

Tickwise の %D は、直近3日分の %K を平均したもの。

#### %D = 直近3本の %K の単純平均

### Tickwise におけるスコアリング（5段階）

Tickwise では、ストキャスのスコアは %K を基準に判定する。
（%D は計算・保持するが、スコア判定自体は %K に基づく）

スコアは以下の 5 段階。

|%Kの水準	|解釈（参考）	|スコア|
|---	|---	|---|
|90以上	|強い過熱圏（高値圏）	|-2|
|80以上	|過熱圏（高値圏）	|-1|
|20以下	|売られ気味（安値圏）	|+1|
|10以下	|強い売られ過ぎ（安値圏）	|+2|
|それ以外	|中立	|0|

このスコアは、
「トレンド方向」を出すためではなく、
短期的な行き過ぎを数値として要約するためのものとして設計されている。

### 値の見方（参考としての一例）

ストキャスは 0〜100 のスケールなので、
ユーザが閾値を意識しやすい。

- 閾値を 上げる（例：80→85）
→ より極端な高値圏だけを過熱とみなす（シグナルは減る）

- 閾値を 下げる（例：80→70）
→ 広い範囲を高値圏とみなす（シグナルは増える）

低値側も同様に、

- 閾値を 下げる（例：20→15）
→ かなり極端な安値圏だけを拾う（シグナルは減る）

- 閾値を 上げる（例：20→30）
→ 安値圏とみなす範囲を広げる（シグナルは増える）

Tickwise はこの種の「ノブ」をレシピ側で活用できるよう、
%K / %D とスコアを構造体に保持している。

### まとめ：ストキャスが示すもの

Tickwise におけるストキャスティクスは、

14期間レンジ内での終値位置（%K）

その平滑化（%D）

%Kを元にした過熱・売られ過ぎのスコア

を提供し、
短期の行き過ぎを定量化する補助指標として機能する。

トレンド系（EMA/SMA）や勢い系（ROC）と組み合わせることで、
「走っているのか」「行き過ぎているのか」を別々の軸で判断できる。


## ボリンジャーバンド（Bollinger Bands）

ボリンジャーバンドは、一定期間の価格分布（平均とばらつき） をもとに、現在価格が「高い位置／低い位置」にいるか、また 値動きが圧縮されているか（収縮）／広がっているか（拡散） を把握する指標。

Tickwiseでは以下を算出する。

- 上限バンド（Upper）

- 下限バンド（Lower）

- %B（バンド内の位置）

- Bandwidth（バンド幅＝圧縮／拡散の度合い）

### Tickwiseでの計算方法

- 期間：20

- 標準偏差：2.0

- 中心線（Mid）：(Upper + Lower) / 2（2σ対称のため）

- 派生値

- %B

- %B = (Close - Lower) / (Upper - Lower)


- → 0.0 に近いほど下限寄り、1.0 に近いほど上限寄り

- Bandwidth（%）

- Bandwidth(%) = (Upper - Lower) / Mid × 100


- → 値が小さいほど価格変動が圧縮されている

### スコアリング（価格位置）

Tickwiseでは 現在価格がバンドの外側に出ているか を5段階で評価する。

- 上限より 2%以上上 → -2

- 上限突破 → -1

- バンド内 → 0

- 下限割れ → +1

- 下限より 2%以上下 → +2

※ここで評価しているのは「位置」であり、方向の断定はしない。

### スクイーズ（Squeeze）とは何か

スクイーズとは、
Bandwidth が小さくなり、値動きが圧縮されている状態を指す。

これは「上がる／下がる」を示すものではなく、

値幅が出ていない

方向感が固まっていない

という 状態を把握するための概念。

Tickwiseではスクイーズを 売買シグナルとしては扱わない。

### スクイーズ発生時の捉え方（参考）

スクイーズが発生しているときは、
「大きく動いていない」ことが Bandwidth で説明できる局面に入っている。

そのため、スクイーズは

「今は走っていない」
「なぜ判断がつきにくいのか」

を把握する材料として使える。

### スクイーズ判定のオプション
#### --bb-bandwidth-squeeze-pct <pct>

Bandwidth がこの値以下なら、Tickwiseは スクイーズ状態として扱う。

- 値を 小さくする
→ より強い圧縮だけをスクイーズとみなす（厳選寄り）

- 値を 大きくする
→ 緩い圧縮もスクイーズに含める（広めに拾う）

このパラメータは、
**「どの程度の圧縮を“スクイーズ”と呼ぶか」**を調整するノブ。

### まとめ

ボリンジャーバンドは Tickwise において、

価格の 位置（Upper/Lower と %B）

値動きの 状態（Bandwidth とスクイーズ）

を数値で把握するための指標。

スクイーズは売買方向を決めるものではなく、
相場が圧縮状態にあるかどうかを把握するための情報として扱われる。


## フィボナッチ・リトレースメント（Fibonacci Retracement）

Tickwise におけるフィボナッチは、
**価格が「直近の値幅のどの位置にいるか」**を
一度だけ決めたルールで数値化するための指標。

トレンドを予測するものではなく、

今が「戻りの途中」なのか

押しが深いのか浅いのか

中央（50%）付近で迷っているのか

を 位置情報として整理する役割を持つ。

### フィボナッチとは

フィボナッチ・リトレースメントは、

- 直近の高値（High）

- 直近の安値（Low）

の差（値幅）に対して、
一定の比率で「戻り／押し」の目安を引く手法。

一般に使われる代表的な水準は、

- 38.2%

- 50.0%

- 61.8%

Tickwise もこの3点に絞って扱う。

### Tickwise における計算方法

1) 高値・安値の確定

入力された期間の MarketData から、

- 全期間の 最高値（high）

- 全期間の 最安値（low）

を取得する。

#### span = high - low


- ※ span ≤ 0 の場合（変動なし）は
→ 判定不能として 中立（0） にする。

2) フィボナッチ水準の算出

Tickwise では 一度だけ、ここで確定する。

#### 38.2% = high - span × 0.382
#### 50.0% = high - span × 0.500
#### 61.8% = high - span × 0.618


この水準は 表示用・判定用ともに SoT（Single Source of Truth）。

### Tickwise におけるスコアリング思想（重要）

Tickwise のフィボナッチは、
「どの帯にいるか」を明確に分ける設計になっている。

### ポイント

- 0点は 50%近傍だけ

- 上か下かは必ずどちらかに倒す

- 境界のブレを避けるため、±eps を設ける

### スコア判定ルール（唯一の真実）

終値（close）と各水準の位置関係で、
ここで一度だけスコアを確定する。

|位置関係	|解釈（参考）	|スコア|
|---	|---	|---|
|50% ± ε	|中央付近・迷い	|0|
|38.2%より上	|押しが浅い	|+2|
|50%超〜38.2%未満	|戻り途中	|+1|
|61.8%より下	|押しが深い	|-2|
|61.8%超〜50%未満	|下落寄り	|-1|

- ※ ε（eps）は 50%近傍の許容幅
- ※ 境界に乗った場合でも「必ず + / - どちらか」に倒す設計

### 値の見方（参考）

フィボナッチは 数値を動かす指標ではない。
見るべきは「帯のどこにいるか」。

- 38.2%より上
→ 押しが浅く、強い値動きの途中と解釈されやすい

- 50%付近
→ 買い・売りが拮抗しやすい

- 61.8%より下
→ 深い押し／戻りで、慎重な判断が必要

Tickwise では
「今はどの帯か」だけを機械的に切り出す。

意味づけや売買判断は、
他の指標（RSI / EMA / ADX など）と
ユーザ側で組み合わせる前提になっている。

### まとめ：フィボナッチの役割

Tickwise におけるフィボナッチは、

高値・安値から水準を一意に確定

38.2 / 50 / 61.8 のどこにいるかを判定

位置情報を -2〜+2 のスコアに落とす

ための指標。

トレンドの強さや勢いを測るものではなく、
「価格の立ち位置」を固定的に示す補助軸として設計されている。

そのため、

逆張りでは「深さの確認」

ブレイク狙いでは「まだ戻りの途中かどうか」

を見極める材料として使われる想定になっている。


## VWAP（Volume Weighted Average Price）

Tickwise における VWAP は、
「直近の平均的な売買価格帯に対して、今の価格がどこにいるか」
を 簡易的・日足ベースで把握するための指標として扱う。

厳密な出来高加重VWAPではなく、

日足データだけで完結

他のトレンド系指標（EMA / SMA）と並べて比較可能

という 実用優先の設計になっている。

### VWAPとは（一般論・最小限）

本来の VWAP（Volume Weighted Average Price）は、

- 価格 × 出来高 を積算

- その日の平均約定価格を算出

することで、
「市場参加者が平均的にどの価格で取引したか」を示す指標。

機関投資家の執行基準として使われることが多い。

### Tickwise における割り切り（重要）

Tickwise は以下の制約を前提にしている。

- 日足データ中心

- 出来高の信頼性が銘柄・市場で揺れる

- 他指標との一貫性を優先

そのため Tickwise では、

VWAP“風”の価格基準線

として、
Typical Price の移動平均を採用している。

### Tickwise における計算方法

1) Typical Price の算出

各日の価格から以下を計算する。

#### Typical Price = (High + Low + Close) / 3


これは
「その日の代表的な価格帯」を表す近似値。

2) 期間設定

- 期間：14日

- 理由：

短期すぎず

- EMA / SMA と並べて見やすい

3) VWAP（簡易版）の算出

Typical Price に対して、

- 14日 Simple Moving Average（SMA）

を適用し、
最新日の値を VWAP として採用する。

### Tickwise におけるスコアリング

VWAP は
「今の終値が、平均的な取引価格帯より上か下か」
だけを評価する。

- 判定軸
#### diff = Close - VWAP

### スコア判定（5段階）
|条件	|解釈（参考）	|スコア|
|---	|---	|---|
|+4.0 以上	|明確に上	|+2|
|+1.0 以上	|やや上	|+1|
|-1.0 ～ +1.0	|ほぼ同水準	|0|
|-1.0 以下	|やや下	|-1|
|-4.0 以下	|明確に下	|-2

- ※ 数値は「勢い」ではなく 位置関係の目安

### 値の見方（参考）

VWAP は
トレンドを作る指標ではない。

- 終値 ＞ VWAP
→ 市場平均より高い位置

- 終値 ＜ VWAP
→ 市場平均より低い位置

といった 相対的位置を見るためのもの。

Tickwise では、

- EMA / SMA：トレンド方向

- ROC / ADX：勢い・走りやすさ

- VWAP：平均価格帯とのズレ

という役割分担で使われる。

### まとめ：VWAPの役割

Tickwise における VWAP は、

Typical Price を使った 日足簡易VWAP

出来高に依存しない安定設計

終値との距離で -2〜+2 にスコア化

するための指標。

厳密な執行指標ではなく、
**「今の価格は平均より高いか／低いか」**を
他の指標と並べて判断するための
位置基準のひとつとして設計されている。


## 一目均衡表（Ichimoku）

Tickwise における一目均衡表は、
転換線（9）と基準線（26）の位置関係だけを使って
相場の「短期の勢い」と「中期の基準」を比較するための指標として扱う。

一目均衡表は本来、雲（先行スパン）や遅行スパンまで含む総合指標だが、
Tickwise では “線のクロス”に絞ってスコア化し、他指標と同列に扱えるようにしている。

### 一目均衡表とは（最小限）

一目均衡表には複数の要素があるが、Tickwise が使うのは以下。

- 転換線（Tenkan-sen）：短期の基準（9期間）

- 基準線（Kijun-sen）：中期の基準（26期間）

いずれも「期間内の高値と安値の平均」で定義される。

### Tickwise における計算方法
1) 必要データ量

最低26期間のデータが必要
（基準線の計算に 26期間を使うため）

2) 転換線（9期間）

直近9期間の

- 最高値（high）

- 最安値（low）

を取り、

#### 転換線 = (9期間の最高値 + 9期間の最安値) / 2


を計算する。

3) 基準線（26期間）

直近26期間の

- 最高値（high）

- 最安値（low）

を取り、

#### 基準線 = (26期間の最高値 + 26期間の最安値) / 2


を計算する。


### Tickwise におけるスコアリング（5段階）

Tickwise の一目は、
転換線 − 基準線（diff） の符号と差分の大きさで判定する。

#### diff = tenkan - kijun

|diff の範囲	|解釈（参考）	|スコア|
|---	|---	|---|  
|2.0 より大きい	|強い上方向	|+2|
|0.5 より大きい	|やや上方向	|+1|
|-0.5 ～ +0.5	|同値圏	|0|
|-2.0 より小さい	|強い下方向	|-2|
|それ以外（負側）	|やや下方向	|-1|

このスコアは、
「転換線が基準線より上＝短期が中期を上回っている」
という状態を、他指標と合成しやすい形に落としたもの。

### 値の見方（参考）

Tickwise での一目は “線のクロス”を見る用途。

- 転換線 ＞ 基準線
→ 短期が中期より強い（上方向の示唆）

- 転換線 ＜ 基準線
→ 短期が中期より弱い（下方向の示唆）

- 近い（±0.5以内）
→ 方向感が弱い／拮抗

差分が大きいほど（±2.0超）
Tickwise ではスコアが強くなる設計。

### まとめ：一目（Tickwise版）の役割

Tickwise における一目均衡表は、

転換線（9）と基準線（26）を計算し

その差分だけで -2〜+2 にスコア化

することで、
一目を「総合指標」ではなく 短期 vs 中期の強弱比較として取り込み、
EMA/SMA などのトレンド系指標と同じレイヤで合成できるようにしている。
