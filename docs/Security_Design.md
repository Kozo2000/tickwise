# 🛡 Tickwise セキュリティ設計：論理の「鋼」を、投資の「盾」に

Rust製投資分析ツール「Tickwise」は、その核に「想定されるあらゆるセキュリティの配慮」を携えています。私たちが大切にしたのは、投資家にとって柔軟かつ信頼できるツールであること。データの安全性、計算の一貫性、エラーに強い可用性――これらすべての要件に妥協することなく、情熱を注ぎ込みました。

一般的には「CIA（機密性・完全性・可用性）」の順で語られますが、Tickwiseはあえてその順序を入れ替え、**「ICA」**として定義します。なぜなら、投資家にとって最も価値があるのは、何者にも汚染されない**「情報の正確性（Integrity）」**だと信じているからです。

---

## 1. 完全性（Integrity）：不変の真実（SOT）を守り抜く
Tickwiseを支えるバックボーン、それはデータ一貫性維持のための**単一の信頼可能な情報源（SOT: Source of Truth）**哲学です。

#### ● 専用ラッパー `TechnicalDataGuard` による厳格なアクセス制御
投資指標データのあらゆる操作は、専用のラッパー構造体 `TechnicalDataGuard` を通じて行われます。
- **直接アクセスの禁則化:** 「真の構造体」への直接的な読み書きをエンジニアリングレベルで禁止。必ずガード（ラッパー）を経由することを強制しています。
- **バグの根絶:** 処理系に合わせたリード/ライト用メソッドのみを提供することで、不用意なバグや、計算フローの途中での予期せぬデータ破壊を徹底的に抑え込んでいます。

#### ● 単一実行による計算の唯一性
Tickwiseにおいて、各テクニカル指標の計算はプログラムのライフサイクル中で**「一度きり」**しか行われません。画面表示、CSV/JSONログ、LLMプロンプトのすべてにおいて、寸分違わぬ「同一の数値」が供給されることを保証しています。

#### ● ソフトウェア・サプライチェーンの透明性（SBOM）
私たちは、利用するライブラリの安全性にも責任を持ちます。
- **SBOM (Software Bill of Materials) の提供:** CycloneDX形式等のSBOMを生成し、使用しているすべての依存パッケージを可視化。サプライチェーン攻撃のリスクに対し、常に透明性の高い状態を維持しています。
- **標準ライブラリ `ta` クレートの採用:** 独自実装を最小化し、コミュニティで検証��れた標準的な計算エンジンを採用することで、ロジックの正当性を担保しています。

---

## 2. 機密性（Confidentiality）：資産の死守とシステムへの誠実さ
「利用者のシステムを侵害しないこと」と「APIキーをメモリ上に放置しないこと」を徹底しています。

#### ● 資産価値としての API キー：極小露出とゼロパディング
APIキーは金銭的価値を持つ資産であり、その露出時間は短ければ短いほど安全です。
- **オンデマンド展開:** 読み込んだAPIキーは常時メモリに展開し続けるのではなく、**「APIリクエストを構築する直前」**にのみ最小限のスコープで展開されます。
- **直後のゼロパディング廃棄:** 通信処理が完了した直後、当該メモリ領域に対して直ちに**ゼロパディング（0埋め）**を施して廃棄。ロジックの他所からキーを追跡・出力することを物理的に不可能にしています。
- **デバッグ時のマスク:** `--debug-args` 出力時も、キーはマスク処理され、不注意による画面共有等での漏洩を防ぎます。

#### ● システムへの影響遮断（Rustの安全性）
- **メモリ安全性の追求:** Rustを採用し、ポインタ不正操作による侵害を排除。
- **多層サニタイズ:** ファイル、ティッカー、クエリ等の入力境界で、不正文字や過長データを検知・無効化し、OSへの影響を遮断します。

---

## 3. 可用性（Availability）：止まらない論理、揺るがない信頼
ツールが動かなければ、いかに優れたロジックも価値を持ちません。

#### ● 異常終了（Crash）の完全排除
- **`unwrap` の完全排除:** すべてのエラーチェックを構造化し、異常終了（パニック）という「逃げ」を自分たちに禁じました。どのような不安定なネットワーク環境下でも、安全にエラーを報告し、処理を継続または終了する堅牢さを実現しています。

#### ● レジリエンス（回復力）
APIの欠落や設定不備に対しても、安全なデフォルト動作（フォールバック）を定義。出力形式を常に一定に保つことで、他のツールとの連携においても高い可用性を発揮します。

---

## 設計者としての誇り
Tickwiseには「想定されるあらゆるセキュリティの配慮」が施されています。

SBOMによるサプライチェーンの透明化、APIキーの極小露出とゼロパディング廃棄、そしてSOTによるデータの完全性。これらはすべて、ユーザーがどんな環境でも自信を持って利用できるための「約束」です。

**「壊れない、嘘をつかない、漏らさない。」**
この極当たり前のことを最高水準で追求し続けること。それが Tickwise のアイデンティティです。